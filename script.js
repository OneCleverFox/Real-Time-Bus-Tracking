mapboxgl.accessToken =
  "ENTER YOUR API TOKEN HERE";

var map = new mapboxgl.Map({
  container: "map",
  style: "mapbox://styles/mapbox/streets-v11",
  center: [8.475100026627757,49.64175060929654],
  zoom: 14,
});

var marker = new mapboxgl.Marker().setLngLat([8.475100026627757,49.64175060929654]).addTo(map);

const busStops = [  [8.473807512057533,49.64332164438491],
  [8.470712391558237,49.64275889936829],
  [8.466913823592506,49.642003216549],
  [8.463752731450171,49.6413841842072],
  [8.46122552476183,49.640834402717985],
  [8.460831050698374,49.64166221791007],
  [8.46025123484148,49.64313113487151],
  [8.459823999911634,49.643012567614676],
  [8.459274700957565,49.64418503769002],
  [8.458949190466626,49.64482395612612],
  [8.459325561972207,49.64488323679291],
  [8.460302094079537,49.64247243734172],

  [8.461833009275836,49.638726897737286],
  [8.46390814749094,49.63366739929097],
  [8.468078096407226,49.62355434821532],
  [8.473924846534743,49.609295586749596],
  [8.47855434141104,49.59851245041418],
  [8.481692556334195,49.58867316942499],
  [8.48192906891353,49.57510898804935],
  [8.482306358097134,49.55149945584475],

  [8.482599733148902,49.526145202692476],
  [8.478356113411593,49.51758987396104],
  [8.460647186828965,49.50455620401931],
  [8.45694672673585,49.50033192457326],
  [8.453915749263388,49.49268324336961],
  [8.45664700826876,49.48365470400307],
  [8.469418290008747,49.47917774095947],
  [8.46725993517353,49.478923872931745],
  [8.466665512228673,49.478372136876914],
  [8.469043204143418,49.477092086055734],
  [8.470894407026407,49.476054778332326],
  [8.474387318866661,49.47434328927244],
  [8.475938650397183,49.47326139608609],
  [8.480446478986295,49.47140399655606],
  [8.47860493444901,49.471271846975725],
  
];

let counter = 0;
function move() {
  setTimeout(() => {
    if (counter >= busStops.length) return;

    const nextStop = busStops[counter];

    const bounds = map.getBounds();
    if (!bounds.contains(nextStop)) {
      map.flyTo({
        center: nextStop,
        zoom: 14,
        speed: 0.2,
        essential: true
      });
    } else {
      map.setCenter(nextStop);
    }

   
    marker.setLngLat(nextStop);

    counter++;
    move();
  }, 2000);
}


move();

